import{f as B,i as F,h as C,j as z,e as H,g as O,F as L,_ as q,a as D,b as G,c as J,d as X,u as Y,n as Q,o as W,k as Z,m as ee}from"./data-provider-CRPD38VS.js";import{c as x}from"./createLucideIcon-D4wKMX01.js";import{d as I,b as v,w as l,I as M,c as t,u as e,g as _,G as h,H as w,K as ae,r as te,v as m,o as r,T as ne,a as S,F as P,y as b,t as y,U as se,q as k,J as T,s as le}from"./index-CV0LAtof.js";import{_ as $}from"./index-DfEpMvWH.js";import{_ as V,a as oe}from"./Input.vue_vue_type_script_setup_true_lang-C1mAp7YM.js";import{_ as N}from"./Card.vue_vue_type_script_setup_true_lang-BJw-cN6Q.js";import{_ as R,a as U}from"./CardHeader.vue_vue_type_script_setup_true_lang-CikiBPGW.js";import{c as K,a as ie}from"./index-tt1Mp-FD.js";/**
 * @license lucide-vue-next v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=x("ChevronLeftIcon",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-vue-next v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=x("ChevronRightIcon",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-vue-next v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=x("ListXIcon",[["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M16 18H3",key:"12xzn7"}],["path",{d:"m19 10-4 4",key:"1tz659"}],["path",{d:"m15 10 4 4",key:"1n7nei"}]]);/**
 * @license lucide-vue-next v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=x("PackageOpenIcon",[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]]);/**
 * @license lucide-vue-next v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=x("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),me={class:"flex items-center flex-col justify-center"},ge=I({__name:"table",props:{table:{},isLoading:{type:Boolean},hideHeader:{type:Boolean}},setup(c){return(s,u)=>(r(),v(e(H),null,{default:l(()=>[s.hideHeader?M("",!0):(r(),v(e(B),{key:0},{default:l(()=>[(r(!0),_(h,null,w(s.table.getHeaderGroups(),i=>(r(),v(e(C),{key:i.id,class:"border-b"},{default:l(()=>[(r(!0),_(h,null,w(i.headers,n=>(r(),v(e(O),{key:n.id,style:ne({width:`${n.getSize()}%`})},{default:l(()=>[n.isPlaceholder?M("",!0):(r(),v(e(L),{key:0,render:n.column.columnDef.header,props:n.getContext()},null,8,["render","props"]))]),_:2},1032,["style"]))),128))]),_:2},1024))),128))]),_:1})),t(e(F),{class:ae([s.isLoading?"animate-pulse":""])},{default:l(()=>{var i;return[(i=s.table.getRowModel().rows)!=null&&i.length?(r(!0),_(h,{key:0},w(s.table.getRowModel().rows,n=>(r(),v(e(C),{key:n.id},{default:l(()=>[(r(!0),_(h,null,w(n.getVisibleCells(),p=>(r(),v(e(z),{key:p.id,class:"md:break-all"},{default:l(()=>[t(e(L),{render:p.column.columnDef.cell,props:p.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1024))),128)):(r(),v(e(C),{key:1},{default:l(()=>[t(e(z),{colSpan:s.table.getAllColumns().length,class:"h-24 text-center"},{default:l(()=>[te(s.$slots,"empty-message",{},()=>[m("div",me,[t(e(de),{class:"size-12"}),u[0]||(u[0]=m("span",{class:"font-medium text-2xl"},"No data",-1))])])]),_:3},8,["colSpan"])]),_:3}))]}),_:3},8,["class"])]),_:3}))}}),fe={class:"flex justify-between max-sm:flex-col gap-4"},ve={class:"flex gap-2 items-center"},ye={class:"text-sm text-muted-foreground text-nowrap"},_e={class:"flex gap-2 items-center"},be={class:"flex gap-2 max-sm:justify-end max-sm:w-full"},he=I({__name:"pagination",props:{total:{},table:{},pagination:{}},emits:["update:page","update:pageSize"],setup(c,{emit:s}){const u=c,i=s,n=S(()=>u.pagination.pageIndex<0?1:u.pagination.pageIndex+1);function p(a){const o=a.target.value?Number(a.target.value)-1:0;Number.isNaN(o)||i("update:page",o<0?0:o)}function g(a){i("update:page",0),i("update:pageSize",Number(a))}return(a,o)=>(r(),_("div",fe,[m("div",ve,[m("div",ye,P(a.table.getPageCount())+' "page(s)" / '+P(a.total)+' "item(s)" ',1),t(e(q),{"default-value":"10","onUpdate:modelValue":g},{default:l(()=>[t(e(D),{class:"h-9 justify-between gap-2"},{default:l(()=>[m("div",null,[o[2]||(o[2]=b(" Per Page ")),t(e(G),{class:"flex-none"})])]),_:1}),t(e(J),null,{default:l(()=>[(r(),_(h,null,w(["10","20","50","100"],f=>t(e(X),{key:f,value:f},{default:l(()=>[b(P(f),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1})]),m("div",_e,[m("div",be,[t(e($),{class:"size-9 min-w-9 max-sm:w-full",variant:"outline",size:"icon",disabled:!a.table.getCanPreviousPage(),onClick:o[0]||(o[0]=f=>a.table.previousPage())},{default:l(()=>[t(e(ue),{class:"h-4 w-4"})]),_:1},8,["disabled"]),t(e(V),{class:"w-20 h-9 max-sm:w-full",min:1,max:a.table.getPageCount(),"model-value":n.value,inputmode:"numeric",type:"number",onInput:p},null,8,["max","model-value"]),t(e($),{class:"size-9 min-w-9 max-sm:w-full",variant:"outline",size:"icon",disabled:!a.table.getCanNextPage(),onClick:o[1]||(o[1]=f=>a.table.nextPage())},{default:l(()=>[t(e(re),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])]))}});function we(){const c=y({pageIndex:0,pageSize:10});function s({pageIndex:u,pageSize:i}){return c.value.pageIndex=u,c.value.pageSize=i,{pageIndex:u,pageSize:i}}return{pagination:c,setPagination:s}}const ke="syncraStorageColumnVisibility",xe=K(()=>({columnVisibility:ie(ke,{})})),j={key:"Key",value:"Value"},Ce=K(()=>{const{columnVisibility:c}=xe(),{pagination:s,setPagination:u}=we(),i=y([]),n=y(!1),p=y(null),g=y(1),a=y(0),o=S(()=>({page:s.value.pageIndex,perPage:s.value.pageSize})),f=async()=>{n.value=!0,p.value=null;try{const d=await ee("storage",o.value);i.value=d.data,g.value=Math.ceil(d.total/o.value.perPage),a.value=d.total}catch(d){p.value=d.message,console.log(d)}finally{n.value=!1}};se(f);const E=S(()=>[{accessorKey:j.key,size:20,header:()=>k("div",{},"Key"),cell:({row:d})=>k("div",d.original.Key)},{accessorKey:j.value,size:20,header:()=>k("div",{},"Value"),cell:({row:d})=>k("div",d.original.Value)}]),A=Y({get pageCount(){return g.value},get data(){return i.value},get columns(){return E.value},state:{get columnVisibility(){return c.value},get pagination(){return s.value}},manualPagination:!0,enableRowSelection:!0,onPaginationChange:d=>T(d,s),onColumnVisibilityChange:d=>T(d,c),getCoreRowModel:Z(),getFacetedRowModel:W(),getFacetedUniqueValues:Q()});return{isLoading:n,table:A,totalPairs:a,pagination:s,setPagination:u,fetchData:f}}),Pe={class:"p-4"},Se={class:"flex space-x-2 mb-4"},$e={class:"flex mr-[0.5em]"},Ve={class:"flex items-center justify-center h-[400px]"},je=I({__name:"Storage",setup(c){const s=y(""),u=y(""),{toast:i}=le(),n=Ce(),p=async()=>{if(!s.value||!u.value){i({variant:"destructive",description:"Key and Value must not be empty."});return}try{const g=await fetch("http://localhost:8080/v1/storage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:s.value,value:u.value})});if(!g.ok)throw new Error(`HTTP error! Status: ${g.status}`);i({description:"Pair added successfully."}),s.value="",u.value="",n.pagination.value.pageIndex=n.pagination.value.pageIndex-1,n.pagination.value.pageIndex=n.pagination.value.pageIndex+1}catch{i({title:"Uh oh! Something went wrong.",description:"Some error occured.",variant:"destructive",action:k(oe,{altText:"Try again"},{default:()=>"Try again"})})}};return(g,a)=>(r(),_("div",Pe,[t(e(N),{class:"mb-3"},{default:l(()=>[t(e(R),null,{default:l(()=>a[4]||(a[4]=[b("Add value")])),_:1}),t(e(U),null,{default:l(()=>[m("div",Se,[m("div",$e,[t(e(V),{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=o=>s.value=o),placeholder:"Key",class:"w-1/3 mr-2"},null,8,["modelValue"]),t(e(V),{modelValue:u.value,"onUpdate:modelValue":a[1]||(a[1]=o=>u.value=o),placeholder:"Value",class:"w-1/3 mr-2"},null,8,["modelValue"]),t(e($),{onClick:p,class:"h-10 w-20"},{default:l(()=>[t(e(pe),{class:"w-4 h-4"}),a[5]||(a[5]=b(" Add "))]),_:1})])])]),_:1})]),_:1}),t(e(N),null,{default:l(()=>[t(e(R),null,{default:l(()=>a[6]||(a[6]=[b("Storage")])),_:1}),t(e(U),null,{default:l(()=>[t(he,{total:e(n).totalPairs.value,table:e(n).table,pagination:e(n).pagination.value,"onUpdate:page":a[2]||(a[2]=o=>e(n).pagination.value.pageIndex=o),"onUpdate:pageSize":a[3]||(a[3]=o=>e(n).pagination.value.pageSize=o)},null,8,["total","table","pagination"]),t(ge,{table:e(n).table,"is-loading":e(n).isLoading.value},{"empty-message":l(()=>[m("div",Ve,[t(e(ce),{class:"w-6 h-6 mr-2"}),a[7]||(a[7]=b(" Storage is empty "))])]),_:1},8,["table","is-loading"])]),_:1})]),_:1})]))}});export{je as default};
